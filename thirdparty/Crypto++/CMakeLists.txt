option(WITH_SYSTEM_CRYPTOPP "Use system Crypto++" OFF)
if (WITH_SYSTEM_CRYPTOPP)
	set(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} "${CMAKE_SOURCE_DIR}/cmake")
	find_package(Crypto++ REQUIRED)
else()
	set(CRYPTOPP_BUILD_TESTING OFF)
	set(CRYPTOPP_DEFAULT_BUILD_TYPE "Release")
	add_subdirectory(cryptopp-cmake)
	if (MSVC)
		target_compile_definitions(cryptopp PRIVATE _SILENCE_ALL_MS_EXT_DEPRECATION_WARNINGS)
	else()
		target_compile_options(cryptopp PRIVATE -fno-strict-aliasing)
	endif()
endif()
